

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2.6. EDP: Demand Parameters &mdash; Hydro-UQ  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
        <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.7. RV: Random Variables" href="RV.html" />
    <link rel="prev" title="2.5. FEM: Finite Element Method" href="FEM.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../index.html">



  
  <img src="../../../_static/HydroUQ-Logo.png" class="logo" alt="Logo"/>

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../common/front-matter/ack.html">1. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/front-matter/license.html">2. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/front-matter/glossary.html">3. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/front-matter/abbreviations.html">4. Abbreviations</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">1. Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="uguide.html">2. User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="UQ.html">2.1. UQ: Uncertainty Quantification</a></li>
<li class="toctree-l2"><a class="reference internal" href="GI.html">2.2. GI: General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="SIM.html">2.3. SIM: Structural Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="EVT.html">2.4. EVT: Hydro Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="FEM.html">2.5. FEM: Finite Element Method</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.6. EDP: Demand Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standard">2.6.1. Standard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-defined">2.6.2. User Defined</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="RV.html">2.7. RV: Random Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="RES.html">2.8. RES: Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../resguide/resguide.html">3. Researcher Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpvideo.html">4. Help Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">5. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices.html">6. Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes.html">7. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/user_manual/bugs.html">8. Bugs &amp; Feature Requests</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../techman/hazards/water.html">1. Water-borne Hazards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../techman/fvm/fvm.html">2. Finite Volume Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../techman/swsolver/swsolver.html">3. Shallow Water Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../techman/cfdsolver/cfdsolver.html">4. CFD Solvers</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../common/developer_manual/how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/developer_manual/architecture/desktop/architecture.html">2. Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../common/developer_manual/coding_style/desktop/coding_style.html">3. Coding Style</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Hydro-UQ</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="uguide.html"><span class="section-number">2. </span>User Guide</a> &raquo;</li>
        
      <li><span class="section-number">2.6. </span>EDP: Demand Parameters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Hydro/userman/userguide/EDP.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="edp-demand-parameters">
<span id="lbl-edpdempara"></span><h1><span class="section-number">2.6. </span>EDP: Demand Parameters<a class="headerlink" href="#edp-demand-parameters" title="Permalink to this headline">¶</a></h1>
<p>This panel is where the user selects which outputs will be displayed when
the simulation runs. There are several options available in the pull-down.</p>
<ol class="arabic simple">
<li><p>Standard</p></li>
<li><p>User Defined</p></li>
</ol>
<div class="section" id="standard">
<h2><span class="section-number">2.6.1. </span>Standard<a class="headerlink" href="#standard" title="Permalink to this headline">¶</a></h2>
<p>When the user selects this option, there are no additional
inputs required. The standard EDP generator will ensure the
max absolute value of the following is obtained:</p>
<ol class="arabic simple">
<li><p>Relative Floor displacements:</p></li>
<li><p>Absolute Floor Accelerations</p></li>
<li><p>Interstory Drifts</p></li>
</ol>
<p>The results will contain results for these in abbreviated form:</p>
<ol class="arabic simple">
<li><p>PFD peak relative floor displacement Event#-PFD-FLOOR-CLINE</p></li>
<li><p>PFA peak floor acceleration Event#-PFA-FLOOR-CLINE</p></li>
<li><p>PID peak inter-story drift: Event#-PID-STORY-CLINE</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Floors are numbered starting at floor 0, and stories are numbered starting at story 1.</p>
</div>
</div>
<div class="section" id="user-defined">
<h2><span class="section-number">2.6.2. </span>User Defined<a class="headerlink" href="#user-defined" title="Permalink to this headline">¶</a></h2>
<p>As shown in <a class="reference internal" href="#useredp"><span class="std std-numref">Fig. 2.6.2.1</span></a>, this panel allows users to determine their own output and process it. When using this option, the user provides additional data:</p>
<div class="align-center figure" id="id1">
<span id="useredp"></span><img alt="../../../_images/userDefinedEDP.png" src="../../../_images/userDefinedEDP.png" />
<p class="caption"><span class="caption-number">Fig. 2.6.2.1 </span><span class="caption-text">User Defined EDP panel.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic simple">
<li><p>Additional Input: These are additional commands invoked by the analysis application before the transient analysis is performed. For example, for OpenSees, this would be a script containing a series of recorder commands. A recorder file passed to OpenSees might look like the following:</p></li>
</ol>
<blockquote>
<div><div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">recorder</span> EnvelopeNode <span class="o">-</span>file node.out <span class="o">-</span>node <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="o">-</span>dof <span class="mi">1</span> disp
<span class="nv">recorder</span> EnvelopeElement <span class="o">-</span>file ele.out <span class="o">-</span>ele <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> forces
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Postprocess Script: This is a python or Tcl script invoked after the finite element application has run. It must be provided by the user. Its purpose is to process the output files and create a single file, namely results.out. This file must contain a single line with as many entries as EDP’s specified.</p></li>
</ol>
<p>For example, a python postprocessing file that would take the outputs from the recorder commands of the previous code block to create the results file needed by the applications might look like the following:</p>
<blockquote>
<div></div></blockquote>
<p>A Tcl file might look like the following:</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> nodeIn <span class="k">[</span><span class="nb">open</span> node.out r<span class="k">]</span>
<span class="k">while</span> <span class="k">{</span> <span class="k">[</span><span class="nb">gets</span> <span class="nv">$nodeIn</span> data<span class="k">]</span> <span class="o">&gt;=</span> <span class="nv">0</span> <span class="k">}</span> <span class="k">{</span>
   <span class="k">set</span> maxDisplacement <span class="nv">$data</span>
<span class="k">}</span>
<span class="nb">puts</span> <span class="nv">$maxDisplacement</span>

<span class="c"># create file handler to write results to output &amp; list into which we will put results</span>
<span class="k">set</span> resultFile <span class="k">[</span><span class="nb">open</span> results.out w<span class="k">]</span>
<span class="k">set</span> results <span class="k">[]</span>

<span class="c"># for each quanity in list of QoI passed</span>
<span class="c">#  - get nodeTag</span>
<span class="c">#  - get nodal displacement if valid node, output 0.0 if not</span>
<span class="c">#  - for valid node output displacement, note if dof not provided output 1&#39;st dof</span>

<span class="k">foreach</span> edp <span class="nv">$listQoI</span> <span class="k">{</span>
   <span class="k">set</span> splitEDP <span class="k">[</span><span class="nb">split</span> <span class="nv">$edp</span> <span class="s2">&quot;_&quot;</span><span class="k">]</span>
   <span class="k">set</span> nodeTag <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$splitEDP</span> <span class="mi">1</span><span class="k">]</span>
       <span class="k">if</span> <span class="k">{[</span><span class="nb">llength</span> <span class="nv">$splitEDP</span><span class="k">]</span> <span class="o">==</span> <span class="nv">3</span><span class="k">}</span> <span class="k">{</span>
          <span class="k">set</span> dof <span class="mi">1</span>
   <span class="k">}</span> <span class="k">else</span> <span class="k">{</span>
          <span class="k">set</span> dof <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$splitEDP</span> <span class="mi">3</span><span class="k">]</span>
   <span class="k">}</span>
   <span class="k">set</span> nodeDisp <span class="k">[</span><span class="nb">lindex</span> <span class="nv">$maxDisplacement</span> <span class="k">[expr</span> <span class="k">((</span><span class="nv">$nodeTag-1</span><span class="k">)</span><span class="o">*</span><span class="nv">2</span><span class="k">)</span><span class="o">+</span><span class="nv">$dof-1</span><span class="k">]]</span>
   <span class="nb">lappend</span> results <span class="nv">$nodeDisp</span>
<span class="k">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The name of the output file must be <strong>results.out</strong>.</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Response Parameters. This is an area in which the user</p></li>
</ol>
<blockquote>
<div><p>associates a variable name with the column of the results output
file. If the process script has an array of strings named named
EDP’s the script, the Response Parameters will be initially set with
these values from the script.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', '...', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>